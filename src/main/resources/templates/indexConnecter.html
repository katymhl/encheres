<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      data-th-replace="~{layouts/layout :: layout-encheres(
                    titrePage=~{:: title},
                    contenuPage=~{:: main},
                    ressourcesSupp=~{:: link})}">

<head>
    <title th:text="#{index.title}">Accueil</title>
    <link rel="stylesheet" href="/css/index.css" th:fragment="link">
    <style>
        select:disabled {
            opacity: 0.5;
            pointer-events: none;
        }
    </style>
</head>

<body>
<main class="index-container">

    <!-- Filtres -->

    <section class="index-filters">
        <label th:text="#{index.filters.title}"></label>
        <form th:action="@{/accueil/connecter}" method="get">

            <!-- Champ texte -->
            <input type="text" name="search" th:placeholder="#{index.search.placeholder}" th:value="${search}">


            <!-- Catégorie -->
            <label for="categorie" th:text="#{index.category.label}"></label>
            <select id="categorie" name="categorie">
                <option value="" th:selected="${categorie} == null" th:text="#{index.category.all}">Toutes</option>
                <option value="1" th:selected="${categorie} == 1" th:text="#{index.category.1}">Ameublement</option>
                <option value="2" th:selected="${categorie} == 2" th:text="#{index.category.2}">Informatique</option>
                <option value="3" th:selected="${categorie} == 3" th:text="#{index.category.3}">Sport & Loisir</option>
                <option value="4" th:selected="${categorie} == 4" th:text="#{index.category.4}">Vêtement</option>
            </select>

            <!-- Radios + selects -->
            <div class="index-radio-filters-horizontal">
                <div class="radio-group">


               
                    <p th:text="#{index.radio.achats}">Achats</p>
                    <div class="radio-line">
                        <label>
                            <input type="radio" name="mode" value="achats" id="radioAchats" data-target="filtreAchats"
                                   th:checked="${mode == null or mode == 'achats'}">
                        </label>
                        <select name="filtreAchats" id="filtreAchats">
                             <option value="ouvertes" th:selected="${filtreAchats} == 'ouvertes'" th:text="#{index.radio.achats.open}">Enchères ouvertes</option>
                        <option value="encours" th:selected="${filtreAchats} == 'encours'" th:text="#{index.radio.achats.ongoing}">Mes enchères en cours</option>
                        <option value="remportees" th:selected="${filtreAchats} == 'remportees'" th:text="#{index.radio.achats.won}">Mes enchères remportées</option>
                        </select>
                    </div>
                </div>

                <div class="radio-group">
                    <p th:text="#{index.radio.ventes}">Mes ventes</p>
                    <div class="radio-line">
                        <label>
                            <input type="radio" name="mode" value="ventes" id="radioVentes" data-target="filtreVentes"
                                   th:checked="${mode == 'ventes'}">
                        </label>
                        <select name="filtreVentes" id="filtreVentes">
                            <option value="encours" th:selected="${filtreVentes} == 'encours'" th:text="#{index.radio.ventes.ongoing}">Mes ventes en cours</option>
                        <option value="nonDebutees" th:selected="${filtreVentes} == 'nonDebutees'" th:text="#{index.radio.ventes.notStarted}">Mes ventes non débutées</option>
                        <option value="terminees" th:selected="${filtreVentes} == 'terminees'" th:text="#{index.radio.ventes.ended}">Mes ventes terminées</option>
                        </select>
                    </div>

                </div>
            </div>

            <div class="index-filter-buttons">

                <button type="submit" class="index-btn primary" th:text="#{index.button.search}">Rechercher</button>
                <a th:href="@{/}" class="index-btn secondary" th:text="#{index.button.cancel}">Annuler</a>

              
            </div>
        </form>
    </section>

    <!-- Liste des enchères -->
    <section class="index-auctions">

        <h2 th:text="#{index.auctions.title}">Liste des enchères</h2>

       


        <div class="index-cards">
            <div class="index-card" th:each="enchere : ${encheres}">
                <div class="index-img-placeholder">
                    <img th:src="@{/images/placeholder.jpg}" th:alt="#{index.auctions.image.alt}">
                </div>

                <h3>
                    <a th:href="@{/details/{id}(id=${enchere.no_article})}"
                       th:text="${enchere.nom_article}" th:placeholder="#{index.auctions.name.placeholder}">Nom article</a>
                </h3>

                <p>
                    <span th:text="#{index.auctions.price.label}">Prix :</span>
                    <span th:text="${enchere.prix_vente}">1</span>
                    <span th:text="#{index.auctions.price.unit}">point(s)</span>
                </p>

                <p>
                    <span th:text="#{index.auctions.date.label}">Fin de l'enchère :</span>
                    <span th:text="${#temporals.format(enchere.date_fin_encheres, 'dd/MM/yyyy')}">01/06/202X</span>
                </p>

                <p>
                    <span th:text="#{index.auctions.seller.label}">Vendeur :</span>
                    <a th:href="@{/profil(id_utilisateur=${enchere.id_utilisateur})}">

                        <strong><span th:text="${enchere.id_utilisateur}" th:placeholder="#{index.auctions.seller.placeholder}"></span></strong>

                      

                    </a>
                </p>
            </div>
        </div>
    </section>

</main>
</body>
</html>
